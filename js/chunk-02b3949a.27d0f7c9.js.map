{"version":3,"sources":["webpack:///./src/views/SignIn.vue?f48c","webpack:///./src/views/SignIn.vue","webpack:///./src/views/SignIn.vue?46cf"],"names":["class","for","type","handleSubmit","id","name","placeholder","autocomplete","required","autofocus","email","password","to","render","__scopeId","data","isProcessing","methods","fire","icon","title","post","response","jwToken","global","auth","setToken","status","$store","commit","getUser","Error","message","$router","push","path","console","log"],"mappings":"kHAAA,W,+ICCOA,MAAM,kB,uBAEP,eAIM,OAJDA,MAAM,oBAAkB,CAC3B,eAEK,MAFDA,MAAM,8BAA6B,e,SAKpCA,MAAM,yB,uBACT,eAAgC,SAAzBC,IAAI,SAAQ,SAAK,M,GAcrBD,MAAM,yB,uBACT,eAAsC,SAA/BC,IAAI,YAAW,YAAQ,M,uBAahC,eAES,UAFDD,MAAM,wCAAwCE,KAAK,UAAS,YAEpE,M,GAEKF,MAAM,oB,iBACiB,a,uBAK5B,eAEI,KAFDA,MAAM,oCAAmC,iBAE5C,M,oFAjDJ,eAmDM,MAnDN,EAmDM,CAlDJ,eAiDO,QAjDDA,MAAM,uBAAwB,SAAM,8CAAe,EAAAG,cAAA,EAAAA,aAAA,qBAAY,sB,CACnE,EAMA,eAaM,MAbN,EAaM,CAZJ,E,eACA,eAUE,SATAC,GAAG,QACHC,KAAK,QACLH,KAAK,QACLF,MAAM,eACNM,YAAY,QACZC,aAAa,WACbC,SAAA,GACAC,UAAA,G,qDACS,EAAAC,MAAK,K,mBAAL,EAAAA,WAIb,eAYM,MAZN,EAYM,CAXJ,E,eACA,eASE,SARAN,GAAG,WACHC,KAAK,WACLH,KAAK,WACLF,MAAM,eACNM,YAAY,WACZC,aAAa,mBACbC,SAAA,G,qDACS,EAAAG,SAAQ,K,mBAAR,EAAAA,cAIb,EAIA,eAIM,MAJN,EAIM,CAHJ,eAEc,GAFDC,GAAG,WAAS,C,wBAAC,iBAE1B,C,cAGF,G,gCC3CN,OAAOC,OAASA,EAChB,OAAOC,UAAY,kBAEJ,qB,0HDmDA,QACbT,KAAM,QACNU,KAFa,WAGX,MAAO,CACLL,MAAO,GACPC,SAAU,GACVK,cAAc,IAGlBC,QAAS,CACDd,aADC,WACe,8KAEb,EAAKO,OAAU,EAAKC,SAFP,uBAGhB,OAAMO,KAAK,CACTC,KAAM,UACNC,MAAO,yBALO,iCASlB,EAAKJ,cAAe,EATF,SAUK,OAAMK,KAAK,cAAe,CAC/CX,MAAO,EAAKA,MACZC,SAAU,EAAKA,WAZC,UAUZW,EAVY,OAeZC,EAAUD,EAASP,KACzBS,EAAOC,KAAKC,SAASH,GACbI,EAAWL,EAAXK,OAER,EAAKC,OAAOC,OAAO,iBAAkBL,EAAOC,KAAKK,WAAa,IAG/C,MAAXH,EAtBc,uBAuBV,IAAII,MAAMT,EAASU,SAvBT,QA0BlB,OAAMd,KAAK,CAAEC,KAAM,UAAWC,MAAO,kBACrC,EAAKa,QAAQC,KAAK,CAAEC,KAAM,MA3BR,qDA8BlB,EAAKxB,SAAW,GAEhB,OAAMO,KAAK,CACTC,KAAM,UACNC,MAAO,YAET,EAAKJ,cAAe,EACpBoB,QAAQC,IAAI,QAAZ,MArCkB,iE","file":"js/chunk-02b3949a.27d0f7c9.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SignIn.vue?vue&type=style&index=0&id=326023d0&lang=scss&scoped=true\"","<template>\r\n  <div class=\"container py-5\">\r\n    <form class=\"w-100 form-container\" @submit.prevent.stop=\"handleSubmit\">\r\n      <div class=\"text-center mb-4\">\r\n        <h1 class=\"h3 mb-3 font-weight-normal\">\r\n          Sign In\r\n        </h1>\r\n      </div>\r\n\r\n      <div class=\"form-label-group mb-2\">\r\n        <label for=\"email\">email</label>\r\n        <input\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          class=\"form-control\"\r\n          placeholder=\"email\"\r\n          autocomplete=\"username\"\r\n          required\r\n          autofocus\r\n          v-model=\"email\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-label-group mb-3\">\r\n        <label for=\"password\">Password</label>\r\n        <input\r\n          id=\"password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          class=\"form-control\"\r\n          placeholder=\"Password\"\r\n          autocomplete=\"current-password\"\r\n          required\r\n          v-model=\"password\"\r\n        />\r\n      </div>\r\n\r\n      <button class=\"btn btn-lg btn-primary btn-block mb-3\" type=\"submit\">\r\n        Submit\r\n      </button>\r\n\r\n      <div class=\"text-center mb-3\">\r\n        <router-link to=\"/signup\">\r\n          Sign Up\r\n        </router-link>\r\n      </div>\r\n\r\n      <p class=\"mt-5 mb-3 text-muted text-center\">\r\n        &copy; 2021-2022\r\n      </p>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from '../../commons/axios'\r\nimport { Toast } from '../../commons/helpers'\r\n\r\nexport default {\r\n  name: 'login',\r\n  data () {\r\n    return {\r\n      email: '',\r\n      password: '',\r\n      isProcessing: false\r\n    }\r\n  },\r\n  methods: {\r\n    async handleSubmit () {\r\n      try {\r\n        if (!this.email || !this.password) {\r\n          Toast.fire({\r\n            icon: 'warning',\r\n            title: '請填入 email 和 password'\r\n          })\r\n          return\r\n        }\r\n        this.isProcessing = true\r\n        const response = await axios.post('/auth/login', {\r\n          email: this.email,\r\n          password: this.password\r\n        })\r\n        //console.log('response====>:',response)\r\n        const jwToken = response.data\r\n        global.auth.setToken(jwToken)\r\n        const { status } = response\r\n        \r\n        this.$store.commit('setCurrentUser', global.auth.getUser() || {})\r\n        // TODO: 取得 API 請求後的資料\r\n      \r\n        if (status !== 200) {\r\n          throw new Error(response.message)\r\n        }\r\n\r\n        Toast.fire({ icon: 'success', title: 'Login Success' })\r\n        this.$router.push({ path: '/' })\r\n      } catch (error) {\r\n        // 將密碼欄位清空\r\n        this.password = ''\r\n        // 顯示錯誤提示\r\n        Toast.fire({\r\n          icon: 'warning',\r\n          title: '帳號或密碼錯誤'\r\n        })\r\n        this.isProcessing = false\r\n        console.log('error', error)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  margin-top: 10px;\r\n}\r\n\r\n.form-container {\r\n  font-size: 2em;\r\n  font-family: \"Cormorant Garamond\", serif;\r\n}\r\n</style>\r\n","import { render } from \"./SignIn.vue?vue&type=template&id=326023d0&scoped=true\"\nimport script from \"./SignIn.vue?vue&type=script&lang=js\"\nexport * from \"./SignIn.vue?vue&type=script&lang=js\"\n\nimport \"./SignIn.vue?vue&type=style&index=0&id=326023d0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-326023d0\"\n\nexport default script"],"sourceRoot":""}